<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Taxa occupation of Celtic Invasive Plants database or selections (Taxa_Occup_CIPdb) — Taxa_Occup_CIPdb • CelticInvasivePlantsdb</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Taxa occupation of Celtic Invasive Plants database or selections (Taxa_Occup_CIPdb) — Taxa_Occup_CIPdb"><meta property="og:description" content="This function estimates the percentage of taxa occupation given a taxonomic scope and an area scope."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CelticInvasivePlantsdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Cgt93/CelticInvasivePlantsdb/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Taxa occupation of Celtic Invasive Plants database or selections (Taxa_Occup_CIPdb)</h1>
    <small class="dont-index">Source: <a href="https://github.com/Cgt93/CelticInvasivePlantsdb/blob/HEAD/R/Graphs.R" class="external-link"><code>R/Graphs.R</code></a></small>
    <div class="hidden name"><code>Taxa_Occup_CIPdb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function estimates the percentage of taxa occupation given a taxonomic scope and an area scope.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Taxa_Occup_CIPdb</span><span class="op">(</span><span class="va">data</span>, <span class="va">Scope_taxa</span>, <span class="va">Scope_Area</span>, output_name <span class="op">=</span> <span class="st">"Taxa_Occupation"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--data-">'data'<a class="anchor" aria-label="anchor" href="#arg--data-"></a></dt>
<dd><p>argument must be the table obtained from CIPdb() or another selection of this (Select_CIPdb, WDPA_PID_select_CIPdb).</p></dd>


<dt id="arg--scope-taxa-">'Scope_taxa'<a class="anchor" aria-label="anchor" href="#arg--scope-taxa-"></a></dt>
<dd><p>must be be either a character string or a vector of character strings. It must be one of these: Phylum, Subphylum, Order, Family, Genus and Species_with_Author.</p></dd>


<dt id="arg--scope-area-">'Scope_Area'<a class="anchor" aria-label="anchor" href="#arg--scope-area-"></a></dt>
<dd><p>must be be either a character string or a vector of character strings. It must be one of these: UTM_grid, Subprovince, Country, Constituent_Country_OR_Crown_Dependency, Admin_units_II, Admin_units_III, National_Nature_Reserve_Name, and Natura_2000_Name.</p></dd>


<dt id="arg--output-name-">'output_name'<a class="anchor" aria-label="anchor" href="#arg--output-name-"></a></dt>
<dd><p>this parameter only works when the function is fed with more than one string for the 'Scope_Area'  parameter. This will be the common name given to the different tables generated by this function. This common name will be followed by one of the values fed in 'Scope_Area'  parameter.
This is automatically set to "Taxa_Occupation", but this name can be changed by the user.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>This function returns a table in which one column corresponds to the different values of the 'Scope_Area' values of the 'data' and column(s) named after the Scope_taxa values (e.g. if  the Scope_taxa value is Phylum, this would be named as Phylum_richness) dealing the number of different elements found in this column in the input 'data'.
If this function is fed with more than one element in Scope_Area', it will automatically generate a table per each different value. If the Scope_Area is set to "UTM_grid", the columns for the Latitude and Longitude of the coordinates of the centroids of this 10x10 km grid will be included in the retrieved table.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The optimal way of using this function is in combination with the  Select_CIPdb() or WDPA_PID_select_CIPdb() functions.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides the taxa richness of Family Genus and species in the UTM_grid of France.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">=</span> <span class="fu"><a href="CIPdb.html">CIPdb</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in df %&gt;% mutate(across(where(is.character), ~ifelse(.x == "" |     .x == "nan", NA_character_, .x))):</span> could not find function "%&gt;%"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">My_taxa_scope</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Family"</span>, <span class="st">"Genus"</span>, <span class="st">"Species_with_Author"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_tax_occup</span> <span class="op">=</span> <span class="fu">Taxa_Occup_CIPdb</span><span class="op">(</span><span class="va">Data</span>, <span class="va">My_taxa_scope</span> , <span class="st">"Country"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Scope_Area, function(area) {    result &lt;- data %&gt;% filter(!is.na(!!sym(area))) %&gt;% group_by(!!sym(area)) %&gt;%         summarise(across(all_of(Scope_taxa), ~length(unique(UTM_grid[. !=             "" &amp; !is.na(.) &amp; !is.nan(.)]))))    names(result)[-1] &lt;- paste0(names(result)[-1], "_occupation")    for (taxon in Scope_taxa) {        occup_col &lt;- paste0(taxon, "_occupation")        percent_col &lt;- paste0(taxon, "_occupation_percentage")        area_values &lt;- unique(result[[area]])        occup_db_subset &lt;- .occup_db[.occup_db$Category %in%             area_values, ]        result[[percent_col]] &lt;- (result[[occup_col]]/occup_db_subset$UTM_grids_10x10_Km[match(result[[area]],             occup_db_subset$Category)]) * 100    }    result}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides Genera and Species Richness of  in the Subprovinces, National_Nature_Reserve_Name, and Natura_2000_Name  of France  and Spain</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">=</span> <span class="fu"><a href="CIPdb.html">CIPdb</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in df %&gt;% mutate(across(where(is.character), ~ifelse(.x == "" |     .x == "nan", NA_character_, .x))):</span> could not find function "%&gt;%"</span>
<span class="r-in"><span><span class="va">My_selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="Select_CIPdb.html">Select_CIPdb</a></span><span class="op">(</span><span class="va">Data</span>, query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"France"</span>, <span class="st">"Spain"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'Data' not found</span>
<span class="r-in"><span><span class="va">My_areas</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Subprovince"</span>, <span class="st">"National_Nature_Reserve_Name"</span>, <span class="st">"Natura_2000_Name"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_taxa_scope</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Genus"</span>, <span class="st">"Species_with_Author"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_tax_occup</span> <span class="op">=</span> <span class="fu">Taxa_Occup_CIPdb</span><span class="op">(</span><span class="va">My_selection</span>, <span class="va">My_taxa_scope</span> , <span class="va">My_areas</span>, output_name <span class="op">=</span> <span class="st">"Spain_France_Species_Genus_Occupation"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Scope_Area, function(area) {    result &lt;- data %&gt;% filter(!is.na(!!sym(area))) %&gt;% group_by(!!sym(area)) %&gt;%         summarise(across(all_of(Scope_taxa), ~length(unique(UTM_grid[. !=             "" &amp; !is.na(.) &amp; !is.nan(.)]))))    names(result)[-1] &lt;- paste0(names(result)[-1], "_occupation")    for (taxon in Scope_taxa) {        occup_col &lt;- paste0(taxon, "_occupation")        percent_col &lt;- paste0(taxon, "_occupation_percentage")        area_values &lt;- unique(result[[area]])        occup_db_subset &lt;- .occup_db[.occup_db$Category %in%             area_values, ]        result[[percent_col]] &lt;- (result[[occup_col]]/occup_db_subset$UTM_grids_10x10_Km[match(result[[area]],             occup_db_subset$Category)]) * 100    }    result}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This generates the occupation of the species of the genus Cotoneaster</span></span></span>
<span class="r-in"><span><span class="va">My_selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="Select_CIPdb.html">Select_CIPdb</a></span><span class="op">(</span><span class="va">Data</span>, query <span class="op">=</span> <span class="st">"Cotoneaster"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'Data' not found</span>
<span class="r-in"><span><span class="va">My_areas</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Subprovince"</span>, <span class="st">"National_Nature_Reserve_Name"</span>, <span class="st">"Natura_2000_Name"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_taxa_scope</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Genus"</span>, <span class="st">"Species_with_Author"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_tax_occup</span> <span class="op">=</span> <span class="fu">Taxa_Occup_CIPdb</span><span class="op">(</span><span class="va">My_selection</span>, <span class="va">My_taxa_scope</span> , <span class="va">My_areas</span>, output_name <span class="op">=</span> <span class="st">"Cotoneaster_Species_Genus_Occupation"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Scope_Area, function(area) {    result &lt;- data %&gt;% filter(!is.na(!!sym(area))) %&gt;% group_by(!!sym(area)) %&gt;%         summarise(across(all_of(Scope_taxa), ~length(unique(UTM_grid[. !=             "" &amp; !is.na(.) &amp; !is.nan(.)]))))    names(result)[-1] &lt;- paste0(names(result)[-1], "_occupation")    for (taxon in Scope_taxa) {        occup_col &lt;- paste0(taxon, "_occupation")        percent_col &lt;- paste0(taxon, "_occupation_percentage")        area_values &lt;- unique(result[[area]])        occup_db_subset &lt;- .occup_db[.occup_db$Category %in%             area_values, ]        result[[percent_col]] &lt;- (result[[occup_col]]/occup_db_subset$UTM_grids_10x10_Km[match(result[[area]],             occup_db_subset$Category)]) * 100    }    result}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Claudia González-Toral.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

