<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Automatic Taxa Report of Celtic Invasive Plants database or selections (Taxa_Report_CIPdb) — Taxa_Report_CIPdb • CelticInvasivePlantsdb</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Automatic Taxa Report of Celtic Invasive Plants database or selections (Taxa_Report_CIPdb) — Taxa_Report_CIPdb"><meta property="og:description" content='Generate an automatic Taxa report of the Celtic Invasive Plants database or a selection of this of the unique values of the categorical columns, given a  value of the columns "Species_with_Author", "Taxa", "Taxa_ID" or "Genus".'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CelticInvasivePlantsdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Cgt93/CelticInvasivePlantsdb/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Automatic Taxa Report of Celtic Invasive Plants database or selections (Taxa_Report_CIPdb)</h1>
    <small class="dont-index">Source: <a href="https://github.com/Cgt93/CelticInvasivePlantsdb/blob/HEAD/R/data.R" class="external-link"><code>R/data.R</code></a></small>
    <div class="hidden name"><code>Taxa_Report_CIPdb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generate an automatic Taxa report of the Celtic Invasive Plants database or a selection of this of the unique values of the categorical columns, given a  value of the columns "Species_with_Author", "Taxa", "Taxa_ID" or "Genus".</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Taxa_Report_CIPdb</span><span class="op">(</span><span class="va">data</span>, <span class="va">Scope</span>, <span class="va">Values</span>, output_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--data-">'data'<a class="anchor" aria-label="anchor" href="#arg--data-"></a></dt>
<dd><p>must be the table obtained from CIPdb() or another selection of this (Select_CIPdb, WDPA_PID_select_CIPdb).</p></dd>


<dt id="arg--scope-">'Scope'<a class="anchor" aria-label="anchor" href="#arg--scope-"></a></dt>
<dd><p>must correspond with one of the possible taxa categories: "Species_with_Author", "Taxa", "Taxa_ID" and "Genus".
The value in this argument must exactly correspond with the name of only one of these columns for this function to work.</p></dd>


<dt id="arg--values-">'Values'<a class="anchor" aria-label="anchor" href="#arg--values-"></a></dt>
<dd><p>must be be either a character string or a vector of character strings.This must coincide with the potential values of the 'Scope' columns.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>This function returns a table object with 3 columns: Category, Number and Value.
The Category columnn refers to: (1) area categories ("Species_with_Author", "Taxa_ID", "Taxa_URL", "Phylum", "Subphylum", "Order", "Family", "Genus", Subprovince", "Country", "Constituent_Country_OR_Crown_Dependency", "Admin_units_II", "Admin_units_III", "National_Nature_Reserve_Name",  "Natura_2000_Name""EU_Concern", "Celtic_Fringe_Origin", "Celtic_Fringe_Taxa_Category") and (2) the country's listing and taxa category status of the taxa of interest ("Countries_AIS", "Countries_NAIS_&amp;_Alien", "Countries_NAIS_&amp;_Native", "Countries_AIS_&amp;_Listed", "Countries_AIS_&amp;_NOT_Listed") and (3) the occupied protected areas and their national status withing these area ("Occupied_National_Protected_Area_AIS_&amp;_Listed_&amp;_EU_Concern", "Occupied_National_Protected_Area_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern", "Occupied_Natura_2000_AIS_&amp;_Listed_&amp;_EU_Concern", "Occupied_Natura_2000_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern").
The Number column refers to the number of unique values of each category.
The Values column refers to a list of the detected unique values in each category in which the different elements are separated by " &amp; ".
If the "Value" argument is fed with a vector containing more than one elements, this function will automatically create two dataframes (tables) named after the 'data' argument value and each of the vector element fed to the argument 'Value'.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides a species report for Cotoneaster bullatus</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">=</span> <span class="fu"><a href="CIPdb.html">CIPdb</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in df %&gt;% mutate(across(where(is.character), ~ifelse(.x == "" |     .x == "nan", NA_character_, .x))):</span> could not find function "%&gt;%"</span>
<span class="r-in"><span><span class="va">My_Tax_report</span> <span class="op">&lt;-</span> <span class="fu">Taxa_Report_CIPdb</span><span class="op">(</span><span class="va">Data</span>, <span class="st">"Taxa"</span>, <span class="st">"Cotoneaster bullatus"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Values, function(value) {    if (Scope %in% .Taxa_report) {        columnas_analisis &lt;- setdiff(.Taxa_report, Scope)    }    else {        columnas_analisis &lt;- .Taxa_report    }    df_simple_counts &lt;- map_dfr(.simple_counts, function(x) {        data %&gt;% filter(!!sym(Scope) == value) %&gt;% summarise(Category = x,             Number = n_distinct(.data[[x]][.data[[x]] != ""],                 na.rm = TRUE), Values = paste(na.omit(unique(.data[[x]][.data[[x]] !=                 ""])), collapse = " &amp; "))    })    combinaciones_Countries &lt;- list(list(nombre = "Countries_AIS",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Local_Origin = "Alien")),         list(nombre = "Countries_NAIS_&amp;_Alien", filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",             Local_Origin = "Alien")), list(nombre = "Countries_NAIS_&amp;_Native",             filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",                 Local_Origin = "Native")), list(nombre = "Countries_AIS_&amp;_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "YES")), list(nombre = "Countries_AIS_&amp;_NOT_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO")))    df_combinaciones_Countries &lt;- map_dfr(combinaciones_Countries,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Country[Country !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Country[Country !=                   ""])), collapse = " &amp; "))        })    combinaciones_NPs &lt;- list(list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_National_Nature_Reserve = "1")),         list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_National_Nature_Reserve = "1")))    df_combinaciones_NPs &lt;- map_dfr(combinaciones_NPs, function(x) {        filtro &lt;- x$filtro        condiciones &lt;- map2(names(filtro), filtro, ~{            if (grepl("%in%", as.character(.y))) {                values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                quo(!!sym(.x) %in% strsplit(values, ",")[[1]])            }            else {                quo(!!sym(.x) == !!.y)            }        })        data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%             summarise(Category = x$nombre, Number = n_distinct(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""], na.rm = TRUE), Values = paste(na.omit(unique(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""])), collapse = " &amp; "))    })    combinaciones_Nat2000 &lt;- list(list(nombre = "Occupied_Natura_2000_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_Natura_2000 = "1")),         list(nombre = "Occupied_Natura_2000_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_Natura_2000 = "1")))    df_combinaciones_Nat2000 &lt;- map_dfr(combinaciones_Nat2000,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Natura_2000_Name[Natura_2000_Name !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Natura_2000_Name[Natura_2000_Name !=                   ""])), collapse = " &amp; "))        })    resultado &lt;- bind_rows(df_simple_counts, df_combinaciones_Countries,         df_combinaciones_NPs, df_combinaciones_Nat2000)    return(resultado)}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides a genus report for Cotoneaster</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">=</span> <span class="fu"><a href="CIPdb.html">CIPdb</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in df %&gt;% mutate(across(where(is.character), ~ifelse(.x == "" |     .x == "nan", NA_character_, .x))):</span> could not find function "%&gt;%"</span>
<span class="r-in"><span><span class="va">My_Tax_report</span> <span class="op">&lt;-</span> <span class="fu">Taxa_Report_CIPdb</span><span class="op">(</span><span class="va">Data</span>, <span class="st">"Genus"</span>, <span class="st">"Cotoneaster"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Values, function(value) {    if (Scope %in% .Taxa_report) {        columnas_analisis &lt;- setdiff(.Taxa_report, Scope)    }    else {        columnas_analisis &lt;- .Taxa_report    }    df_simple_counts &lt;- map_dfr(.simple_counts, function(x) {        data %&gt;% filter(!!sym(Scope) == value) %&gt;% summarise(Category = x,             Number = n_distinct(.data[[x]][.data[[x]] != ""],                 na.rm = TRUE), Values = paste(na.omit(unique(.data[[x]][.data[[x]] !=                 ""])), collapse = " &amp; "))    })    combinaciones_Countries &lt;- list(list(nombre = "Countries_AIS",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Local_Origin = "Alien")),         list(nombre = "Countries_NAIS_&amp;_Alien", filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",             Local_Origin = "Alien")), list(nombre = "Countries_NAIS_&amp;_Native",             filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",                 Local_Origin = "Native")), list(nombre = "Countries_AIS_&amp;_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "YES")), list(nombre = "Countries_AIS_&amp;_NOT_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO")))    df_combinaciones_Countries &lt;- map_dfr(combinaciones_Countries,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Country[Country !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Country[Country !=                   ""])), collapse = " &amp; "))        })    combinaciones_NPs &lt;- list(list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_National_Nature_Reserve = "1")),         list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_National_Nature_Reserve = "1")))    df_combinaciones_NPs &lt;- map_dfr(combinaciones_NPs, function(x) {        filtro &lt;- x$filtro        condiciones &lt;- map2(names(filtro), filtro, ~{            if (grepl("%in%", as.character(.y))) {                values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                quo(!!sym(.x) %in% strsplit(values, ",")[[1]])            }            else {                quo(!!sym(.x) == !!.y)            }        })        data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%             summarise(Category = x$nombre, Number = n_distinct(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""], na.rm = TRUE), Values = paste(na.omit(unique(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""])), collapse = " &amp; "))    })    combinaciones_Nat2000 &lt;- list(list(nombre = "Occupied_Natura_2000_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_Natura_2000 = "1")),         list(nombre = "Occupied_Natura_2000_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_Natura_2000 = "1")))    df_combinaciones_Nat2000 &lt;- map_dfr(combinaciones_Nat2000,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Natura_2000_Name[Natura_2000_Name !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Natura_2000_Name[Natura_2000_Name !=                   ""])), collapse = " &amp; "))        })    resultado &lt;- bind_rows(df_simple_counts, df_combinaciones_Countries,         df_combinaciones_NPs, df_combinaciones_Nat2000)    return(resultado)}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides a species a separate report for each species</span></span></span>
<span class="r-in"><span><span class="va">My_species</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Abutilon theophrasti Medik."</span>, <span class="st">"Myriophyllum aquaticum (Vell.) Verdc."</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_Tax_report</span> <span class="op">&lt;-</span> <span class="fu">Taxa_Report_CIPdb</span><span class="op">(</span><span class="va">Data</span>, <span class="st">"Species_with_Author"</span>, <span class="va">My_species</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Values, function(value) {    if (Scope %in% .Taxa_report) {        columnas_analisis &lt;- setdiff(.Taxa_report, Scope)    }    else {        columnas_analisis &lt;- .Taxa_report    }    df_simple_counts &lt;- map_dfr(.simple_counts, function(x) {        data %&gt;% filter(!!sym(Scope) == value) %&gt;% summarise(Category = x,             Number = n_distinct(.data[[x]][.data[[x]] != ""],                 na.rm = TRUE), Values = paste(na.omit(unique(.data[[x]][.data[[x]] !=                 ""])), collapse = " &amp; "))    })    combinaciones_Countries &lt;- list(list(nombre = "Countries_AIS",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Local_Origin = "Alien")),         list(nombre = "Countries_NAIS_&amp;_Alien", filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",             Local_Origin = "Alien")), list(nombre = "Countries_NAIS_&amp;_Native",             filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",                 Local_Origin = "Native")), list(nombre = "Countries_AIS_&amp;_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "YES")), list(nombre = "Countries_AIS_&amp;_NOT_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO")))    df_combinaciones_Countries &lt;- map_dfr(combinaciones_Countries,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Country[Country !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Country[Country !=                   ""])), collapse = " &amp; "))        })    combinaciones_NPs &lt;- list(list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_National_Nature_Reserve = "1")),         list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_National_Nature_Reserve = "1")))    df_combinaciones_NPs &lt;- map_dfr(combinaciones_NPs, function(x) {        filtro &lt;- x$filtro        condiciones &lt;- map2(names(filtro), filtro, ~{            if (grepl("%in%", as.character(.y))) {                values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                quo(!!sym(.x) %in% strsplit(values, ",")[[1]])            }            else {                quo(!!sym(.x) == !!.y)            }        })        data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%             summarise(Category = x$nombre, Number = n_distinct(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""], na.rm = TRUE), Values = paste(na.omit(unique(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""])), collapse = " &amp; "))    })    combinaciones_Nat2000 &lt;- list(list(nombre = "Occupied_Natura_2000_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_Natura_2000 = "1")),         list(nombre = "Occupied_Natura_2000_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_Natura_2000 = "1")))    df_combinaciones_Nat2000 &lt;- map_dfr(combinaciones_Nat2000,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Natura_2000_Name[Natura_2000_Name !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Natura_2000_Name[Natura_2000_Name !=                   ""])), collapse = " &amp; "))        })    resultado &lt;- bind_rows(df_simple_counts, df_combinaciones_Countries,         df_combinaciones_NPs, df_combinaciones_Nat2000)    return(resultado)}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#This provides a species a separate report for each species using their IDs</span></span></span>
<span class="r-in"><span><span class="va">My_species</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"368166"</span>, <span class="st">"505938"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">My_Tax_report</span> <span class="op">&lt;-</span> <span class="fu">Taxa_Report_CIPdb</span><span class="op">(</span><span class="va">Data</span>, <span class="st">"Taxa_ID"</span>, <span class="va">My_species</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(Values, function(value) {    if (Scope %in% .Taxa_report) {        columnas_analisis &lt;- setdiff(.Taxa_report, Scope)    }    else {        columnas_analisis &lt;- .Taxa_report    }    df_simple_counts &lt;- map_dfr(.simple_counts, function(x) {        data %&gt;% filter(!!sym(Scope) == value) %&gt;% summarise(Category = x,             Number = n_distinct(.data[[x]][.data[[x]] != ""],                 na.rm = TRUE), Values = paste(na.omit(unique(.data[[x]][.data[[x]] !=                 ""])), collapse = " &amp; "))    })    combinaciones_Countries &lt;- list(list(nombre = "Countries_AIS",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Local_Origin = "Alien")),         list(nombre = "Countries_NAIS_&amp;_Alien", filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",             Local_Origin = "Alien")), list(nombre = "Countries_NAIS_&amp;_Native",             filtro = list(Celtic_Fringe_Taxa_Category = "NAIS",                 Local_Origin = "Native")), list(nombre = "Countries_AIS_&amp;_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "YES")), list(nombre = "Countries_AIS_&amp;_NOT_Listed",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO")))    df_combinaciones_Countries &lt;- map_dfr(combinaciones_Countries,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Country[Country !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Country[Country !=                   ""])), collapse = " &amp; "))        })    combinaciones_NPs &lt;- list(list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_National_Nature_Reserve = "1")),         list(nombre = "Occupied_National_Protected_Area_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_National_Nature_Reserve = "1")))    df_combinaciones_NPs &lt;- map_dfr(combinaciones_NPs, function(x) {        filtro &lt;- x$filtro        condiciones &lt;- map2(names(filtro), filtro, ~{            if (grepl("%in%", as.character(.y))) {                values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                quo(!!sym(.x) %in% strsplit(values, ",")[[1]])            }            else {                quo(!!sym(.x) == !!.y)            }        })        data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%             summarise(Category = x$nombre, Number = n_distinct(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""], na.rm = TRUE), Values = paste(na.omit(unique(National_Nature_Reserve_Name[National_Nature_Reserve_Name !=                 ""])), collapse = " &amp; "))    })    combinaciones_Nat2000 &lt;- list(list(nombre = "Occupied_Natura_2000_AIS_&amp;_Listed_&amp;_EU_Concern",         filtro = list(Celtic_Fringe_Taxa_Category = "AIS", Officially_listed = "%in%c(YES, NO)",             EU_Concern = "YES", Presence_Natura_2000 = "1")),         list(nombre = "Occupied_Natura_2000_AIS_&amp;_NOT_Listed_&amp;_NOT_EU_Concern",             filtro = list(Celtic_Fringe_Taxa_Category = "AIS",                 Officially_listed = "NO", EU_Concern = "NO",                 Presence_Natura_2000 = "1")))    df_combinaciones_Nat2000 &lt;- map_dfr(combinaciones_Nat2000,         function(x) {            filtro &lt;- x$filtro            condiciones &lt;- map2(names(filtro), filtro, ~{                if (grepl("%in%", as.character(.y))) {                  values &lt;- gsub("%in%c\\((.*)\\)", "\\1", .y)                  quo(!!sym(.x) %in% strsplit(values, ",")[[1]])                }                else {                  quo(!!sym(.x) == !!.y)                }            })            data %&gt;% filter(!!!condiciones, !!sym(Scope) == value) %&gt;%                 summarise(Category = x$nombre, Number = n_distinct(Natura_2000_Name[Natura_2000_Name !=                   ""], na.rm = TRUE), Values = paste(na.omit(unique(Natura_2000_Name[Natura_2000_Name !=                   ""])), collapse = " &amp; "))        })    resultado &lt;- bind_rows(df_simple_counts, df_combinaciones_Countries,         df_combinaciones_NPs, df_combinaciones_Nat2000)    return(resultado)}):</span> could not find function "map"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Claudia González-Toral.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

